<?xml version="1.0" encoding="UTF-8"?>
<local:FacetTagFieldBase xmlns:fx="http://ns.adobe.com/mxml/2009"
                         xmlns:exml="http://www.jangaroo.net/exml/0.8"
                         xmlns:local="com.coremedia.ecommerce.studio.components.search.filters.*"
                         xmlns:ui="exml:com.coremedia.ui.config"
                         xmlns:u="exml:untyped"
                         xmlns:ui="exml:com.coremedia.ui.config"
                         xmlns="exml:ext.config"
                         labelSeparator=""
                         filterPickList="true"
                         valueField="{QUERY}"
                         displayField="{LABEL}"
                         queryMode="local"
                         triggerAction="all"
                         publishes="{LABEL}"
                         itemId="facetTagField"
                         emptyText="{resourceManager.getString('com.coremedia.ecommerce.studio.ECommerceStudioPlugin', 'CollectionView_search_filter_empty_facet_text')}"
                         multiSelect="{config.facetValueExpression.getValue().isMultiSelect()}"
                         ariaRole="textbox"
                         forceSelection="true"
                         anchor="100%">
  <fx:Metadata>[PublicApi]</fx:Metadata>
  <fx:Script><![CDATA[
    import com.coremedia.ui.data.ValueExpressionFactory;

    public static const xtype:String = "com.coremedia.ecommerce.studio.components.search.filters.facetTagField";

    private var config:FacetTagField;

    public native function FacetTagField(config:FacetTagField = null);
    ]]></fx:Script>
  <fx:Declarations>
  </fx:Declarations>

  <local:plugins exml:mode="append">
    <ui:BindListPlugin bindTo="{ValueExpressionFactory.createFromValue(config.facetValueExpression.getValue().getValues())}"
                       ifUndefined="{[]}"
                       sortDirection="ASC"
                       sortField="{LABEL}">
      <ui:fields>
        <ui:DataField name="{LABEL}" encode="false"/>
        <ui:DataField name="{QUERY}" encode="false"/>
      </ui:fields>
    </ui:BindListPlugin>
    <ui:BindPropertyPlugin componentProperty="value"
                           bidirectional="true"
                           bindTo="{config.selectedFacetValuesExpression}"/>
  </local:plugins>
</local:FacetTagFieldBase>
