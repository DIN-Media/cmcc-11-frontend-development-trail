<%- if @params[:ssl] -%>
  SSLProxyEngine On
  <%- if node['apache']['version'] == '2.4' && !@params[:ssl_proxy_verify] -%>
  SSLProxyVerify none
  SSLProxyCheckPeerCN off
  SSLProxyCheckPeerName off
  <%- end -%>
<%- end -%>

  <%- if @params[:headers] -%>
  # during development it may be convenient to add headers
  <%- @params[:headers].sort.each do |header| -%>
  <%= header %>
  <%- end -%>
  <%- end -%>

  <%- sfcc_protocol =  @params[:ssl] ? 'https' : 'http' -%>

  ProxyPass / <%= sfcc_protocol %>://<%= @params[:sfcc_host] %>/ timeout=600

# sfcc tools pass through
<%- if @params[:preview] -%>
<%- end -%>

