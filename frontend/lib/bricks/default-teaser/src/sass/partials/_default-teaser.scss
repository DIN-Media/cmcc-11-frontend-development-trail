/**
 * Generates basic styles for a teaser.
 */
@mixin cm-default-teaser(
  $block-class: $cm-teasable-prefix,
  $media-background-color: $cm-teasable-picture-background-color,
  $media-aspect-ratio-by-breakpoint: $cm-teasable-media-aspect-ratio-by-breakpoint,
  $caption-padding: $cm-teasable-caption-padding,
  $headline-color: $cm-teasable-headline-color
) {
  .#{$block-class} {
    margin: 0;

    &__wrapper {
      position: relative;
      height: 100%;
      width: 100%;
    }

    &__picture-box {
      background-color: $media-background-color;
      @include aspect-ratio-box-by-breakpoint($media-aspect-ratio-by-breakpoint);
    }

    &__picture {
      @include stretch-absolute();
    }

    &__caption {
      @include center-absolute(true, false);
      width: 100%;
      padding: $caption-padding;
      text-align: center;
    }

    &__video-wrapper {
      position: relative;
    }

    &--video {
      cursor: pointer;
    }

    &--video &__caption {
      // set to the bottom to clear space for play-button
      top: auto;
      bottom: 0;

      @include breakpoint(sm) {
        bottom: -7%;
      }
      @include breakpoint(md) {
        bottom: 8%;
      }

    }

    &__text,
    &__headline {
      color: $headline-color;
      margin: 0;
    }
    &--video &__text {
      // no space for the text with play-button
      display: none;
    }

    &__headline {
      display: inline-block;
    }

    &__popup-opener {
      display: block;
      position: static;
    }

    &__play {
      @include center-absolute();
      z-index: 1; // move over text
    }


    // Don't optimize styling rule, the intention is to hide the shop-now functionality as long as it is within the
    // teaser. As soon as it is moved away (DOM-wise) the selector should no longer match. That's why it needs both
    // the context to the .#{$block-class} and an additional descendend selector for the shop-now element
    .#{$block-class}__shop-now {
      display: none;
    }
  }
}

@if ($cm-teasable-prefix != null) {
  @include cm-default-teaser();

  // keep this out of the macro as dimmer configuration is deprecated
  .#{$cm-teasable-prefix} {
    &__dimmer {
      display: #{$cm-teasable-dimmer-display};
      @include dimmer($cm-teasable-dimmer-opacity);
      background-color: $cm-teasable-dimmer-background-color;
    }
  }
}
