# CoreMedia Blueprint

## Frontend Module

This is the main module for all frontend developers. It includes reusable bricks, configs, node modules for reuse and
our themes "aurora", "corporate" and "perfectchef" for our demo websites.

More informations:

- [Themes](themes/README.md)
- [Bricks](lib/bricks/README.md)
- [Additional libs, tools and scripts](lib/README.md)

### Requirements

For Java developers:

 - At least JDK7 and Maven 3.1, see [Frontend maven plugin](https://github.com/eirslett/frontend-maven-plugin)
 
For Web developers:
 
 - [node.js](https://nodejs.org/en/) (latest LTS release recommended)
 - [npm](https://www.npmjs.com/) (> v3)
 - [grunt](http://gruntjs.com/) (> v1.0)
 
**Notice:** _Please ensure that the same version of node.js and npm are installed as defined in Maven (in blueprint pom.xml), 
if you want to build themes with both tools._

### Installation

Call Maven to build frontend module.

```$ mvn install```

If you don't want to use Maven, you have to install at least node.js, which includes npm. npm stands for node packaged 
modules and is a way to manage development dependencies through node.js.

```$ npm install```
```$ npm run production```

You can run tests via ```$ npm test```.

Both variants include building all available themes.

### Running local webserver

You need an available CoreMedia contentserver and Java with Maven. Call the Maven Tomcat Plugin to run the CAE Webserver.

```$ mvn tomcat7:run -pl :cae-preview-webapp -Dinstallation.host=<YourCMSHost>```

Open your browser at http://localhost:40980/blueprint/servlet/YourDemoSite

### Generating API Docs

The JavaScript files include documentation comments according to [JSDoc 3](http://usejsdoc.org). The documentation is 
generated to API Markdown files inside the bricks. To recreate the API documentation run ```$ npm run apidoc``` or ```$ grunt apidoc```.

### Troubleshooting

Should you encounter problems with installing dependencies or running Grunt commands, first delete the
```/node/``` and ```/node_modules/``` directory generated by npm. As alternative use ```mvn clean``` to delete these folders.
Then, rerun `npm install` or `mvn install`.

#### Known Issues

If you're working offline or with slow networks, avoid calling ```mvn clean``` because this will clear all ```node_modules``` 
and force some not cachable files like [ node-sass binaries](https://github.com/sass/node-sass/issues/1554) to be downloaded again.


