<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

  <!-- public imports for this service -->
  <import resource="classpath:/framework/spring/blueprint-contentbeans.xml"/>
  <import resource="classpath:/com/coremedia/blueprint/base/multisite/bpbase-multisite-services.xml"/>

  <!-- "private" imports needed for this file's beans -->
  <import resource="classpath:/framework/spring/blueprint-page.xml"/>
  <import resource="classpath:/META-INF/coremedia/livecontext-navigation.xml"/>

  <bean name="contentBeanFactory:CMMarketingSpot" parent="abstractTeasable-blueprint-doctypes"
        class="com.coremedia.livecontext.contentbeans.CMMarketingSpotImpl" scope="prototype">
    <property name="liveContextNavigationFactory" ref="liveContextNavigationFactory"/>
  </bean>

  <bean name="contentBeanFactory:CMProductTeaser" parent="abstractTeasable-blueprint-doctypes"
        class="com.coremedia.livecontext.contentbeans.CMProductTeaserImpl" scope="prototype">
    <property name="liveContextNavigationFactory" ref="liveContextNavigationFactory"/>
  </bean>

  <bean name="pdpPage" parent="cmPage"
        class="com.coremedia.livecontext.contentbeans.ProductDetailPage" scope="prototype"/>

  <bean name="contentBeanFactory:CMExternalPage" parent="abstractChannel-blueprint-doctypes"
        class="com.coremedia.livecontext.contentbeans.CMExternalPageImpl" scope="prototype"/>

  <bean name="contentBeanFactory:CMExternalChannel" parent="abstractChannel-blueprint-doctypes"
        class="com.coremedia.livecontext.contentbeans.LiveContextExternalChannelImpl" scope="prototype">
    <property name="treeRelation" ref="liveContextNavigationTreeRelation"/>
    <property name="liveContextNavigationFactory" ref="liveContextNavigationFactory"/>
    <property name="pageGridService" ref="extCategoryPageGridService"/>
    <property name="pdpPageGridService" ref="pdpPageGridService"/>
  </bean>

  <bean id="pdpPageGridService" class="com.coremedia.blueprint.cae.layout.PageGridServiceImpl">
    <property name="contentBackedPageGridService" ref="pdpContentBackedPageGridService"/>
    <property name="validationService" ref="validationService"/>
  </bean>

  <bean id="extCategoryPageGridService" class="com.coremedia.blueprint.cae.layout.PageGridServiceImpl">
    <property name="contentBackedPageGridService" ref="extCategoryContentBackedPageGridService"/>
    <property name="validationService" ref="validationService"/>
  </bean>

  <bean id="extCategoryContentBackedPageGridService" class="com.coremedia.livecontext.pagegrid.ContentAugmentedPageGridServiceImpl"
        parent="contentBackedPageGridService">
    <property name="treeRelation" ref="externalChannelContentTreeRelation"/>
  </bean>

  <bean id="pdpContentBackedPageGridService" class="com.coremedia.livecontext.pagegrid.ContentAugmentedPageGridServiceImpl"
        parent="contentBackedPageGridService">
    <property name="structPropertyName">
      <util:constant static-field="com.coremedia.blueprint.ecommerce.common.contentbeans.CMAbstractCategory.PDP_PAGEGRID"/>
    </property>
    <property name="treeRelation" ref="externalChannelContentTreeRelation"/>
  </bean>

</beans>

