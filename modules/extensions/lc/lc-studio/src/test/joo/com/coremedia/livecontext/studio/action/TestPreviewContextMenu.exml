<?xml version="1.0" encoding="UTF-8"?>
<exml:component xmlns:exml="http://www.jangaroo.net/exml/0.8"
                xmlns="exml:ext.config"
                xmlns:editor="exml:com.coremedia.cms.editor.sdk.config"
                xmlns:livecontext="exml:com.coremedia.livecontext.studio.config">

  <exml:import class="com.coremedia.ui.data.ValueExpression"/>
  <exml:import class="com.coremedia.ui.data.ValueExpressionFactory"/>
  <exml:import class="com.coremedia.cms.editor.sdk.config.previewPanel"/>
  <exml:import class="com.coremedia.cms.editor.sdk.preview.metadata.MetadataTreeModel"/>
  <exml:import class="com.coremedia.cms.editor.sdk.context.ComponentContextManager"/>
  <exml:import class="com.coremedia.ui.components.ContextMenuNoIcon"/>
  <exml:import class="com.coremedia.livecontext.studio.LivecontextStudioPlugin_properties"/>
  <exml:import class="com.coremedia.cms.editor.sdk.config.previewContextMenu"/>
  <exml:import class="com.coremedia.blueprint.base.components.quickcreate.processing.ProcessingData"/>

  <exml:cfg name="bindTo" type="ValueExpression"/>
  <exml:cfg name="contextInfoValueExpression" type="ValueExpression"/>
  <exml:cfg name="selectedNodeValueExpression" type="ValueExpression"/>
  <exml:cfg name="metadataTreeValueExpression" type="ValueExpression"/>

  <editor:previewContextMenu>

    <items>
      <editor:breadcrumb id="breadcrumb"
                         itemId="{previewContextMenu.BREADCRUMB_ITEM_ID}"
                         treeModel="{new MetadataTreeModel(config.metadataTreeValueExpression)}"
                         ctCls="preview-breadcrumb"
                         enableOverflow="false"
                         disableNavigation="true"
                         hideElementTexts="true"
                         hideOnEmpty="false"
                         disableElementStrategy="{this['disableBreadcrumbElementStrategy']}"
                         selectedNodeValueExpression="{config.selectedNodeValueExpression}"/>

      <menuitem itemId="{previewContextMenu.TITLE_MENU_ITEM_ID}"
                canActivate="false"
                cls="{previewContextMenu.CUSTOM_CONTEXT_MENU_TITLE_CSS}">
        <baseAction>
          <editor:showMetadataIconLabelAction
                  metadataVariableName="{previewPanel.CURRENT_PREVIEW_METADATA_SELECTION_VARIABLE_NAME}"
                  hideOnDisable="true"/>
        </baseAction>
      </menuitem>
      <livecontext:openCreateExternalPageMenuItem/>
      <livecontext:shopPageShowInLibraryMenuItem/>
    </items>
  </editor:previewContextMenu>
</exml:component>
