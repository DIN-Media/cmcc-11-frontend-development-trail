<?xml version="1.0" encoding="UTF-8"?>
<local:CatalogAssetPropertyBase
        xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:local="com.coremedia.livecontext.studio.components.link.*"
        xmlns:exml="http://www.jangaroo.net/exml/0.8"
        xmlns="exml:ext.config"
        xmlns:livecontext="exml:com.coremedia.livecontext.studio.config"
        activeItemValueExpression="{getActiveCatalogAssetPropertyValueExpression(config)}">
  <fx:Script><![CDATA[
    import com.coremedia.ui.data.ValueExpression;
    import com.coremedia.ui.data.ValueExpressionFactory;

    public static const xtype:String = "com.coremedia.livecontext.studio.config.catalogAssetsProperty";

    public static const LINK_LIST_WRAPPER_HBOX:String = "link-list-wrapper-hbox-layout";

    private var config:CatalogAssetsProperty;

    public native function CatalogAssetsProperty(config:CatalogAssetsProperty = null);

    /**
     * A property path expression leading to the Bean whose property is edited.
     * This property editor assumes that this bean has a property 'properties'.
     */
    [Bindable]
    public var bindTo:ValueExpression;
    ]]></fx:Script>
  <fx:Declarations>
    <!--- 
       The name of the sting property of the Bean to bind in this field.
       The string property holds the id of the catalog product
     -->
    <fx:String id="propertyName"/>

    <fx:Array id="assetContentTypes"/>

    <!--- 
       Text shown when the property is empty
     -->
    <fx:String id="emptyText"/>
  </fx:Declarations>

    <local:items>
      <livecontext:CatalogAssets itemId="{CATALOG_ASSET_PROPERTY_ITEM_ID}"
                                 bindTo="{config.bindTo}"
                                 propertyName="{config.propertyName}"
                                 assetContentTypes="{config.assetContentTypes}"
                                 autoScroll="false"
                                 forceReadOnlyValueExpression="{ValueExpressionFactory.createFromValue(true)}">
        <livecontext:view>
          <GridView deferEmptyText="false"/>
        </livecontext:view>
      </livecontext:CatalogAssets>

      <Label itemId="{CATALOG_EMPTY_LABEL_ITEM_ID}"
             text="{config.emptyText}"/>
    </local:items>
  
</local:CatalogAssetPropertyBase>
