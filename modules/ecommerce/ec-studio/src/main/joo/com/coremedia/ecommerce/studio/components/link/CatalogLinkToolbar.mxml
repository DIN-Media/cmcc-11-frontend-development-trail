<?xml version="1.0" encoding="UTF-8"?>
<Toolbar xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:exml="http://www.jangaroo.net/exml/0.8"
         xmlns="exml:ext.config"
         xmlns:ui="exml:com.coremedia.ui.config"
         xmlns:editor="exml:com.coremedia.cms.editor.sdk.config"
         xmlns:u="exml:untyped"
         ui="{ToolbarSkin.FIELD.getSkin()}">
  <fx:Script><![CDATA[
    import com.coremedia.ecommerce.studio.ECommerceStudioPlugin;
    import com.coremedia.ui.data.ValueExpression;
    import com.coremedia.ui.skins.ToolbarSkin;

    public static const xtype:String = "com.coremedia.ecommerce.studio.config.catalogLinkToolbar";

    private var config:CatalogLinkToolbar;

    public native function CatalogLinkToolbar(config:CatalogLinkToolbar = null);

    /**
     * A property path expression leading to the Bean whose property is edited.
     * This property editor assumes that this bean has a property 'properties'.
     */
    [Bindable]
    public var bindTo:ValueExpression;

    /**
     * ValueExpression which makes the component read-only if it is evaluated to true.
     */
    [Bindable]
    public var forceReadOnlyValueExpression:ValueExpression;

    /**
     * ValueExpression which makes the delete button read-only if it is evaluated to true.
     */
    [Bindable]
    public var readOnlyValueExpression:ValueExpression;

    /**
     * A ValueExpression whose value is set to the array of selected items.
     */
    [Bindable]
    public var selectedValuesExpression:ValueExpression;

    /**
     * A ValueExpression whose value is set to the array of indexes of selected items.
     * The array is empty if nothing is selected. The change of the value doesn't update the selection of the grid.
     */
    [Bindable]
    public var selectedPositionsExpression:ValueExpression;
    ]]></fx:Script>
  <fx:Declarations>
    <!---
     The name of the sting property of the Bean to bind in this field.
     The string property holds the id of the catalog product
    -->
    <fx:String id="propertyName"/>

    <!---
     Set to true if the open in tab button should be hidden. Default is false
    -->
    <fx:Boolean id="hideOpenInTab"/>

    <!---
     Set to true if the remove button should be hidden. Default is false
    -->
    <fx:Boolean id="hideRemove"/>

    <fx:Array id="additionalToolbarItems"/>
  </fx:Declarations>

  <plugins>
    <ui:AddItemsPlugin items="{config.additionalToolbarItems}"/>
    <ui:HideObsoleteSeparatorsPlugin/>
  </plugins>
  <defaults>
    <editor:PropertyField bindTo="{config.bindTo}"
                          u:readOnlyValueExpression="{config.readOnlyValueExpression}"
                          forceReadOnlyValueExpression="{config.forceReadOnlyValueExpression}"/>
  </defaults>
  <items>
    <!-- Button for deletion -->
    <ui:IconButton itemId="{ECommerceStudioPlugin.REMOVE_LINK_BUTTON_ITEM_ID}"
                   hidden="{config.hideRemove}">
      <ui:baseAction>
        <editor:DeleteSelectedLinksAction contentValueExpression="{config.bindTo}"
                                          propertyName="{config.propertyName}"
                                          selectedPositionsExpression="{config.selectedPositionsExpression}"
                                          forceReadOnlyValueExpression="{config.readOnlyValueExpression || config.forceReadOnlyValueExpression}"/>
      </ui:baseAction>
    </ui:IconButton>
    <ui:IconButton itemId="{ECommerceStudioPlugin.OPEN_IN_TAB_BUTTON_ITEM_ID}"
                   hidden="{config.hideOpenInTab}">
      <ui:baseAction>
        <editor:OpenEntitiesInTabsAction entitiesValueExpression="{config.selectedValuesExpression}"/>
      </ui:baseAction>
    </ui:IconButton>
  </items>

</Toolbar>
