<?xml version="1.0" encoding="UTF-8"?>
<GridPanel xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:exml="http://www.jangaroo.net/exml/0.8"
           xmlns="exml:ext.config"
           xmlns:ui="exml:com.coremedia.ui.config">
  <fx:Script><![CDATA[
    import com.coremedia.cms.editor.sdk.premular.fields.LinkListViewDragZone;
    import com.coremedia.ecommerce.studio.dragdrop.CatalogDragDropVisualFeedback;
    import com.coremedia.ui.data.ValueExpression;
    import com.coremedia.ui.skins.TableViewSkin;

    public static const xtype:String = "com.coremedia.ecommerce.studio.config.abstractCatalogList";

    // TODO: Ext-AS-API dragZone (and dropZone) in GridViewDragDrop plugin is not marked with create=false
    // remove this workaround and the entire config (can be directly passed in MXML) when this is fixed
    private static const DRAG_ZONE_CFG:LinkListViewDragZone = LinkListViewDragZone({
      htmlFeedback: CatalogDragDropVisualFeedback.getHtmlFeedback,
      ddGroups: ['ContentLinkDD']
    });

    private var config:AbstractCatalogList;

    /**
     * A value expression that specifies where to set the multiply selected items. This is mandatory.
     */
    [Bindable]
    public var selectedItemsValueExpression:ValueExpression;

    public native function AbstractCatalogList(config:AbstractCatalogList = null);
    ]]></fx:Script>
  <fx:Declarations>
    <!---
     The named drag drop group to which this grid belong to
    -->
    <fx:String id="ddGroup"/>

  </fx:Declarations>

  <plugins>
    <ui:BindSelectionPlugin selectedValues="{config.selectedItemsValueExpression}"/>
  </plugins>
  <selModel>
    <selection_RowModel mode="MULTI"/>
  </selModel>
  <view>
    <GridView ui="{TableViewSkin.LIGHT.getSkin()}" stripeRows="true" trackOver="true" loadMask="true"
              deferEmptyText="false">
      <plugins>
        <plugin_GridViewDragDrop copy="true"
                                 enableDrop="false"
                                 ddGroup="{config.ddGroup}"
                                 dragZone="{DRAG_ZONE_CFG}"/>
      </plugins>
    </GridView>
  </view>

</GridPanel>
